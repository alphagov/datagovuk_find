<%
  default_message = t('datasets.contact.default_message', title: @dataset.organisation.title)
  link_attrs = {'data-ga-event': 'contact', 'data-ga-publisher': @dataset.organisation.name, 'class': 'govuk-link'}

  email_name = contact_name_for(dataset).presence || default_message
  foi_name = foi_name_for(dataset).presence || default_message
  mail = contact_email_is_email?(dataset) ? mail_to(contact_email_for(dataset), email_name, link_attrs) : link_to(email_name, contact_email_for(dataset), link_attrs)
  foi_mail = foi_email_is_email?(dataset) ? mail_to(foi_email_for(dataset), foi_name, link_attrs) : link_to(foi_name, foi_email_for(dataset), link_attrs)
%>
<section class="govuk-!-margin-bottom-4">
  <h2 class="govuk-heading-m">
    <%= t('datasets.contact.contact') %>
  </h2>

  <div class="govuk-grid-row">
    <% if contact_email_exists?(dataset) %>
      <div class="govuk-grid-column-one-half">
        <h3 class="govuk-heading-s">
          <%= t('datasets.contact.enquiries') %>
        </h3>
        <p class="govuk-body">
          <%= content_tag(:span, mail) if mail.present? %>
        </p>
      </div>
    <% end %>

    <% if foi_details_exist?(dataset) %>
      <div class="govuk-grid-column-one-half">
        <h3 class="govuk-heading-s">
          <%= t('datasets.contact.foi_requests') %>
        </h3>

        <p class="govuk-body">
          <%= content_tag(:span, foi_mail) if foi_mail.present? %>
          <% if foi_web_address_for(dataset).present? %>
            <%= content_tag(:span) do %>
              <%= link_to(t('datasets.contact.foi_message'), foi_web_address_for(dataset), link_attrs) %>
            <% end %>
          <% end %>
        </p>
      </div>
    <% end %>
  </div>
</section>
